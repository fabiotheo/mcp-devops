#!/bin/bash

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "      ğŸ” TESTE: PRESERVAÃ‡ÃƒO DE CONTEXTO APÃ“S CANCELAMENTO"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Este teste verifica se mensagens canceladas permanecem no contexto"
echo ""
echo "INSTRUÃ‡Ã•ES DETALHADAS:"
echo ""
echo "PASSO 1:"
echo "  Digite: 'Oi, sou o FÃ¡bio, teste'"
echo "  Pressione ENTER"
echo "  Quando comeÃ§ar a processar, pressione ESC para cancelar"
echo ""
echo "PASSO 2:"
echo "  Agora digite: 'Escreva exatamente o que eu digitei na interaÃ§Ã£o anterior'"
echo "  Pressione ENTER"
echo ""
echo "âœ… SUCESSO: A IA deve responder mencionando 'Oi, sou o FÃ¡bio, teste'"
echo "âŒ FALHA: Se a IA disser que nÃ£o houve interaÃ§Ã£o anterior"
echo ""
echo "OBSERVAÃ‡Ã•ES:"
echo "- Com DEBUG ativo, vocÃª verÃ¡ mensagens como:"
echo "  '[Debug] Added to commandHistory: \"Oi, sou o FÃ¡bio, teste\"...'"
echo "  '[Debug] Added cancellation marker to history'"
echo ""
echo "Iniciando interface com DEBUG em 3 segundos..."
echo ""
sleep 3

MCP_USER=fabio node interface-v2/mcp-ink-cli.mjs --debug